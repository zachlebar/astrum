var ndplComponent=Vue.extend({data:function(){return{loaded:!1,hide_sample_code:!1}},props:{component:{required:!0}},computed:{inline_styles:function(){var _this=this,styles='';if(_this.loaded){if(_this.component.options.sample_min_height){styles+='min-height:'+_this.component.options.sample_min_height+'px;'}}
if(_this.component.options.sample_overflow_hidden){styles+='overflow: hidden;'}
if(_this.component.options.sample_background_color){styles+='background-color:'+_this.component.options.sample_background_color+' !important;'}
return styles}},watch:{'component.html':function(){var _this=this;if(this.component.html.length){_this.$root.applySyntaxHighlighting(_this.$el)}}},ready:function(){var _this=this;_this.$on('loaded',function(){window.addEventListener('scroll',_this.updateActive);window.addEventListener('resize',_this.updateActive);_this.setHideSample(function(){_this.loaded=!0})});_this.$on('resizing',function(is_resizing){_this.loaded=!1;if(!is_resizing){_this.setHideSample(function(){_this.loaded=!0})}});if(_this.component.html){_this.$root.applySyntaxHighlighting(_this.$el)}},methods:{updateActive:function(){var _this=this;if(_this.$root&&_this.$root.scroll_position>=_this.$el.offsetTop-60&&_this.$root.scroll_position<_this.$el.offsetTop+_this.$el.offsetHeight){if(!_this.$root.scrolling_to&&!_this.isActive(_this.component)){_this.$root.active_components.push(_this.component);_this.$root.open_group=null;_this.$root.updateHash(_this.component.id)}}else{if(_this.$root&&!_this.$root.scrolling_to){for(var i=0;i<_this.$root.active_components.length;i++){var component=_this.$root.active_components[i];if(component.id===_this.component.id){_this.$root.active_components.splice(i,1);return}}}}},isActive:function(component){var _this=this;for(var i=0;i<_this.$root.active_components.length;i++){var c=_this.$root.active_components[i];if(component.id===c.id){return!0}}
return!1},shouldInvertText:function(hex){var rgb=this.$root.convertHexToRgb(hex),brightness=this.$root.getColorBrightness(rgb);return brightness>210},shouldApplyBorder:function(hex){var rgb=this.$root.convertHexToRgb(hex),brightness=this.$root.getColorBrightness(rgb);return brightness>240},setHideSample:function(callback){callback=typeof callback!=='undefined'?callback:function(){};var _this=this;_this.hide_sample_code=!1;setTimeout(function(){if(_this.$el.querySelector('.ndpl-component__code')){if(_this.$el.querySelector('.ndpl-component__sample')){if(_this.$el.querySelector('.ndpl-component__sample').offsetHeight<=74&&!_this.component.options.disabled_auto_sample_hiding){_this.hide_sample_code=!0}}
if(_this.component.options.disabled_auto_sample_hiding&&_this.component.options.disabled_auto_sample_hiding.hasOwnProperty('show_on_mobile')&&_this.component.options.disabled_auto_sample_hiding.hasOwnProperty('show_on_desktop')){if(_this.$root.mobile_view){_this.hide_sample_code=!_this.component.options.disabled_auto_sample_hiding.show_on_mobile}else{_this.hide_sample_code=!_this.component.options.disabled_auto_sample_hiding.show_on_desktop}}}
callback()},0)},isCodeVisible:function(){var _this=this;return!_this.hide_sample_code}}});Vue.component('ndpl-component',ndplComponent);var ndplGroup=Vue.extend({props:{group:{required:!0}}});Vue.component('ndpl-group',ndplGroup);var ndplScript=Vue.extend({props:{script:{required:!0}},methods:{loadTypekit:function(){try{Typekit.load({async:!0})}catch(e){}}}});Vue.component('ndpl-script',ndplScript);new Vue({el:'html',data:{intro:null,project_logo:null,project_favicon:null,project_name:null,project_url:null,copyright_start_year:null,client_name:null,client_url:null,creators:{},content:{},groups:{},theme:{},assets:{css:[],js:[]},font_libraries:{typekit_code:null,google_web_fonts:null,typography_web_fonts:null},log:{error:[],info:[]},components_count:0,groups_count:0,components_loaded_count:0,groups_loaded_count:0,groups_loaded:!1,loaded:!1,resizing:!1,typekit_loaded:!1,scroll_position:0,prev_scroll_position:0,active_group:null,active_components:[],active_page:null,open_group:null,show_first_page_on_load:!1,scrolling_to:!1,sidebar_scrolling:!1,window_outer_width:0,breakpoint:960,mobile_view:!1,open_nav:!1,rtime:new Date(1,1,2000,12,00,00),timeout:!1,delta:200,version:null},computed:{project:function(){if(this.project_name&&this.project_url){return'<a href="'+this.project_url+'" target="_blank"><span>'+this.project_name+'</span></a>'}
if(this.project_name&&!this.project_url){return this.project_name}
return null},copyright_year:function(){var date=new Date();if(date.getFullYear()==this.copyright_start_year){return this.copyright_start_year}
return this.copyright_start_year+' - '+date.getFullYear()},client:function(){if(this.client_name&&this.client_url){return'<a href="'+this.client_url+'" target="_blank">'+this.client_name+'</a>'}
if(this.client_name&&!this.client_url){return this.client_name}
return null},all_creators:function(){var formattedCreators='';if(this.creators.length&&this.creators[0].name){for(var i=0;i<this.creators.length;i++){prefix=i===this.creators.length-1?' & ':', ';url=this.creators[i].url;name=this.creators[i].name.replace(' ','&nbsp;');formattedCreators+=prefix+'<a href="'+url+'" target="_blank">'+name+'</a>'}
return formattedCreators.substring(2)}
return null},library_inline_styles:function(){var _this=this,styles='';if(_this.theme.max_width){styles+='max-width:'+_this.theme.max_width+'px;'}
return styles}},watch:{groups_loaded:function(){var _this=this;_this.setupComponents()},loaded:function(){var _this=this;_this.scrollTo(window.location.hash);_this.$broadcast('loaded')}},ready:function(){var _this=this;_this.loadDataFile();_this.window_outer_width=window.outerWidth;_this.mobile_view=_this.window_outer_width>=_this.breakpoint?!1:!0;window.addEventListener('scroll',_this.setScrollPosition);window.addEventListener('resize',function(){_this.window_outer_width=window.outerWidth;_this.setScrollPosition();_this.mobile_view=_this.window_outer_width>=_this.breakpoint?!1:!0;_this.rtime=new Date();if(_this.timeout===!1&&!_this.mobile_view){_this.timeout=!0;setTimeout(_this.trackResizing,_this.delta)}});var sidebar=document.querySelector('.ndpl-sidebar');sidebar.addEventListener('mouseover',function(e){_this.sidebar_scrolling=!0})
sidebar.addEventListener('mouseleave',function(e){_this.sidebar_scrolling=!1});setTimeout(function(){var page=_this.isLoadingPage();if(page){_this.loadPage(page)}},0)},methods:{applySyntaxHighlighting:function(el){setTimeout(function(){var blocks=el.querySelectorAll('pre code');for(var i=0;i<blocks.length;i++){var block=blocks[i];hljs.highlightBlock(block)}},0)},loadDataFile:function(){var _this=this;_this.$http.get('./data.json'+'?cb='+new Date()).then(function(response){_this.initData(response.data,function(){if(_this.$data.groups.length){_this.setupGroups()}else{_this.logInfo('You need to add a component to your library before it can be loaded.<br/>You can either do this manually by editing your <code>data.json</code> file,<br/> or you can use the command line helper: <code>astrum new [group_name/component_name]</code>')}})})},isLoadingPage:function(){var _this=this,hash=location.hash;if(_this.content.pages!==undefined&&_this.content.pages.length){if(hash){for(var i=0;i<_this.content.pages.length;i++){var page=_this.content.pages[i];if(page.name==hash.replace('#',''))return page}}else if(_this.content.show_first_page_on_load){return _this.content.pages[0]}}
return!1},initData:function(data,callback){callback=typeof callback!=='undefined'?callback:function(){};var _this=this;for(var key in data){_this.$set(key,data[key])}
callback()},updateHash:function(hash){history.pushState?history.pushState(null,null,'#'+hash):location.hash=hash},setupGroups:function(){var _this=this;for(var i=0;i<_this.groups.length;i++){var group=_this.groups[i];_this.$set('groups['+i+'].id','group-'+group.name);_this.$set('groups['+i+'].active',!1);_this.$set('groups['+i+'].description','');_this.groups_count=_this.groups.length;_this.loadGroup(_this.groups[i])}},setupComponents:function(){var _this=this;for(var i=0;i<_this.groups.length;i++){var group=_this.groups[i];_this.components_count+=group.components.length;for(var j=0;j<group.components.length;j++){_this.$set('groups['+i+'].components['+j+'].id','group-'+group.name+'-component-'+group.components[j].name);_this.$set('groups['+i+'].components['+j+'].group_id','group-'+group.name);_this.$set('groups['+i+'].components['+j+'].active',!1);_this.$set('groups['+i+'].components['+j+'].options',group.components[j].options?group.components[j].options:!1);_this.$set('groups['+i+'].components['+j+'].options.sample_always_show',group.components[j].options.sample_always_show?group.components[j].options.sample_always_show:!1);_this.$set('groups['+i+'].components['+j+'].options.sample_mobile_hidden',group.components[j].options.sample_mobile_hidden?group.components[j].options.sample_mobile_hidden:!1);_this.$set('groups['+i+'].components['+j+'].options.sample_dark_background',group.components[j].options.sample_dark_background?group.components[j].options.sample_dark_background:!1);_this.$set('groups['+i+'].components['+j+'].options.disable_code_sample',group.components[j].options.disable_code_sample?group.components[j].options.disable_code_sample:!1);_this.$set('groups['+i+'].components['+j+'].code_show',!1);_this.$set('groups['+i+'].components['+j+'].type',group.components[j].type?group.components[j].type:'standard');_this.$set('groups['+i+'].components['+j+'].width',group.components[j].width?group.components[j].width:'full');_this.$set('groups['+i+'].components['+j+'].html','');_this.$set('groups['+i+'].components['+j+'].css','');_this.$set('groups['+i+'].components['+j+'].description','');_this.loadComponent(_this.groups[i].components[j])}}},loadGroup:function(group){var _this=this,group_path='./components/'+group.name;_this.$http.get(group_path+'/description.md'+'?cb='+new Date()).then(function(response){group.description=marked(response.data);_this.areGroupsLoaded()},function(){_this.logError('Description file for <strong>'+group.name+'</strong> group failed to load from <code>'+group_path+'/description.md</code>')})},loadComponent:function(component){var _this=this,component_path='./components/'+component.group+'/'+component.name;_this.$http.get(component_path+'/markup.html'+'?cb='+new Date()).then(function(response){component.html=response.data;_this.areComponentsLoaded()},function(){_this.logError('HTML file for <strong>'+component.name+'</strong> component failed to load from <code>'+component_path+'/html.md</code>')});var stylesheet=document.createElement('link');stylesheet.type='text/css';stylesheet.rel='stylesheet';stylesheet.href='components/'+component.group+'/'+component.name+'/style.css';_this.$http.get(component_path+'/style.css'+'?cb='+new Date()).then(function(response){component.css=response.data},function(){_this.logError('CSS file for <strong>'+component.name+'</strong> component failed to load from <code>'+component_path+'/style.css</code>')});document.head.appendChild(stylesheet);_this.$http.get(component_path+'/description.md'+'?cb='+new Date()).then(function(response){component.description=marked(response.data);_this.areComponentsLoaded()},function(){_this.logError('Description file for <strong>'+component.name+'</strong> component failed to load from <code>'+component_path+'/description.md</code>')})},areGroupsLoaded:function(){var _this=this;_this.groups_loaded_count+=1;if(_this.groups_loaded_count===_this.groups_count){setTimeout(function(){_this.groups_loaded=!0},1000)}},areComponentsLoaded:function(){var _this=this;_this.components_loaded_count+=1;if(_this.components_loaded_count===_this.components_count*2){setTimeout(function(){_this.loaded=!0},2000)}},addLog:function(message,data,type){var _this=this;type=typeof type!=='undefined'?type:'error';data=typeof data!=='undefined'?data:null;_this.log[type].push(message);console[type]('[Pattern Library warn]: '+message);if(data){console[type](data)}},logError:function(message,data){var _this=this;_this.addLog(message,data,'error')},logInfo:function(message,data){var _this=this;_this.addLog(message,data,'info')},setScrollPosition:function(){var _this=this,doc=document.documentElement,top=doc&&doc.scrollTop||document.body.scrollTop;_this.prev_scroll_position=_this.scroll_position;_this.scroll_position=top},getScrollDirection:function(){var _this=this;return _this.prev_scroll_position<_this.scroll_position?'down':'up'},scrollToHref:function(e){var _this=this;_this.scrollTo(e.target.hash);_this.active_page=null},scrollTo:function(hash){var _this=this,offset=_this.mobile_view?79:30;if(!hash)return;_this.scrolling_to=!0;smoothScroll.animateScroll(hash,null,{offset:offset,callback:function(){_this.scrolling_to=!1;_this.open_nav=!1}})},toggleNav:function(){var _this=this;_this.open_nav=!_this.open_nav},toggleOpenGroups:function(group){var _this=this;_this.open_group=_this.open_group==group.id?null:group.id;_this.active_page=null},loadPage:function(page){var _this=this;_this.active_page=page;_this.active_components=[];_this.open_group=null;_this.open_nav=!1;_this.$http.get(page.file+'?cb='+new Date()).then(function(response){_this.$set('active_page.markup',marked(response.data));_this.applySyntaxHighlighting(document)});_this.updateHash(page.name)},trackResizing:function(){var _this=this;_this.resizing=!0;_this.$broadcast('resizing',!0);if(new Date()-_this.rtime<_this.delta){setTimeout(_this.trackResizing,_this.delta)}else{_this.timeout=!1;setTimeout(function(){_this.resizing=!1;_this.$broadcast('resizing',!1)},1000)}},convertHexToRgb:function(hex){var shorthandRegex=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;hex=hex.replace(shorthandRegex,function(m,r,g,b){return r+r+g+g+b+b});var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null},getColorBrightness:function(rgb){return Math.round(((parseInt(rgb.r)*299)+(parseInt(rgb.g)*587)+(parseInt(rgb.b)*114))/1000)}}})
